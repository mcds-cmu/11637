!function(){"use strict";Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(Element.prototype.matches.call(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var t="data-track",e=()=>({DATA_HOOK:t,EVENT_SEPARATOR:"||",UTILITY_ATTRIBUTES:{prefer:"".concat(t,"-prefer")},LISTENER_EVENTS:["click","submit","change"],PARENT_PARAMETERS:["context"],LEGACY_PARENT_PARAMETERS:["component"]}),r=function(){return r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},r.apply(this,arguments)},n=function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},n.apply(this,arguments)};function a(t){return t.toLowerCase()}var o=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],i=/[^A-Z0-9]+/gi;function c(t,e){void 0===e&&(e={});for(var r=e.splitRegexp,n=void 0===r?o:r,c=e.stripRegexp,l=void 0===c?i:c,p=e.transform,u=void 0===p?a:p,f=e.delimiter,m=void 0===f?" ":f,v=s(s(t,n,"$1\0$2"),l,"\0"),d=0,h=v.length;"\0"===v.charAt(d);)d++;for(;"\0"===v.charAt(h-1);)h--;return v.slice(d,h).split("\0").map(u).join(m)}function s(t,e,r){return e instanceof RegExp?t.replace(e,r):e.reduce((function(t,e){return t.replace(e,r)}),t)}function l(t,e){var r=t.charAt(0),n=t.substr(1).toLowerCase();return e>0&&r>="0"&&r<="9"?"_"+r+n:""+r.toUpperCase()+n}function p(t,e){return 0===e?t.toLowerCase():l(t,e)}function u(t,e){return void 0===e&&(e={}),function(t,e){return void 0===e&&(e={}),c(t,n({delimiter:"",transform:l},e))}(t,r({transform:p},e))}var f=function(){return f=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},f.apply(this,arguments)};var m=function(){return m=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},m.apply(this,arguments)};function v(t,e){return void 0===e&&(e={}),function(t,e){return void 0===e&&(e={}),c(t,f({delimiter:"."},e))}(t,m({delimiter:"_"},e))}var d=new Set(["pdf","xls","xlsx","doc","docx","txt","rtf","csv","exe","key","pps","ppt","pptx","7z","pkg","rar","gz","zip","avi","mov","mp4","mpg","mpeg","wmv","mid","midi","mp3","wav","wma"]),h=t=>{var e=t.split(/[#?]/)[0].split(".").pop().trim();return d.has(e)&&e},{DATA_HOOK:E,UTILITY_ATTRIBUTES:A,EVENT_SEPARATOR:T,PARENT_PARAMETERS:g,LEGACY_PARENT_PARAMETERS:y}=e(),b=t=>u(t.split("".concat(E,"-")).pop()),w=(t,e,r)=>{var{eventName:n}=e,a=Object.assign(e,(t=>{var e={},r=y.concat(g);for(var n of r){var a="".concat(E,"-").concat(n),o=t.closest("[".concat(a,"]"));o!==t&&null!==o&&(e[b(a)]=o.getAttribute(a))}return e})(t),(t=>{var e={};for(var r of t){var{name:n,value:a}=r,o=b(n);Object.values(A).includes(n)||(e[o]=a)}return e})(r));if("search"===n&&"FORM"===t.tagName){var o=t.querySelector('input[type="search"], input[type="text"]');a.searchTerm=o.value||""}return a},O=(t,e)=>{var r={eventType:e};"A"===t.tagName&&Object.assign(r,(t=>{if(!t.href)throw new Error("Link element must contain an href attribute. If it is purely interactional, consider a button element instead.");var e=t.getAttribute("href"),r=t.hasAttribute("download"),n=h(e),a=(t=>t.split("/").pop())(e),o={linkUrl:e,linkText:t.textContent.replace(/ {4}|[\t\n\r]/gm,"")};return(n||r)&&(o.eventName="file_download"),n&&(o.fileExtension=n,o.fileName=a),o})(t));var n,a={name:(n=t).getAttribute(E),attributes:[].slice.call(n.attributes).filter((t=>t.name.includes("".concat(E,"-"))))},o=a.name&&a.name.includes(T)?a.name.split(T).map((t=>v(t))).pop():a.name,i=Object.assign({},r);o&&(i.eventName=v(o)),(t=>{var e={event:"track",track:t};Array.isArray(window.dataLayer)&&"function"==typeof window.dataLayer.push&&window.dataLayer.push({track:void 0},e)})(w(t,i,a.attributes))},{DATA_HOOK:R,UTILITY_ATTRIBUTES:N,LISTENER_EVENTS:_}=e(),S=t=>{var{type:e,target:r}=t,n=r.closest("[".concat(R,"]"))||(t=>{var e=t.closest("a");if(e){var r=h(e.href);return Boolean(r)}})(r);if(n){var a="FORM"===n.tagName,o="OPTION"===n.tagName;if(!(a&&"submit"!==e||o)){if((t=>{var e=t.tagName.toLowerCase(),r=t.type,n=t.closest("form"),a=("button"===e||"input"===e)&&"submit"===r&&n,o="textarea"===e||"input"===e&&!["hidden","image","reset","button"].includes(r),i="form"===e;return a&&console.warn('There was an attempt to track an event on an element that submits a form. Either set the data-track attributes on the form element instead, or add the data-track-prefer="click" to the '.concat(e," element")),Boolean(a||o||i)})(r)){var i=n.getAttribute(N.prefer);if(null!==i){if(e!==i)return}else if("click"===e)return;r!==n&&console.warn("Ensure that duplicate events are not being collected, i.e. an event from a parent element as well as a ".concat(e," event from the ").concat(r.type," element."))}O(n,e)}}};(t=>{for(var e of _)document.addEventListener(e,S)})()}();
